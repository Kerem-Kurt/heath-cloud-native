
    <!DOCTYPE html>
    <html>
    <head>
        <title>K8s Metrics</title>
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <style>
            body { font-family: 'Segoe UI', sans-serif; padding: 20px; background: #f4f4f4; }
            .card { background: white; padding: 20px; margin-bottom: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
            h1, h2 { text-align: center; color: #333; }
            .row { display: flex; gap: 20px; flex-wrap: wrap; }
            .col { flex: 1; min-width: 45%; }
            canvas { max-height: 350px; }
        </style>
    </head>
    <body>
        <h1>Kubernetes Full Stack Scaling Report</h1>
        
        <!-- BACKEND SECTION -->
        <div class="row">
            <div class="col card">
                <h2>Backend HPA (Replicas vs Avg CPU)</h2>
                <canvas id="beHpaChart"></canvas>
            </div>
            <div class="col card">
                <h2>Backend Pod CPU (millicores)</h2>
                <canvas id="bePodsChart"></canvas>
            </div>
        </div>

        <!-- FRONTEND SECTION -->
        <div class="row">
            <div class="col card">
                <h2>Frontend HPA (Replicas vs Avg CPU)</h2>
                <canvas id="feHpaChart"></canvas>
            </div>
            <div class="col card">
                <h2>Frontend Pod CPU (millicores)</h2>
                <canvas id="fePodsChart"></canvas>
            </div>
        </div>

        <script>
            const rawData = [{"time": "22:08:46", "elapsed": 0, "backend": {"replicas": 1, "hpa_cpu": 1, "pods": {"heath-backend-57dc47cf-w9g6v": 2}}, "frontend": {"replicas": 1, "hpa_cpu": 0, "pods": {"heath-frontend-7fc695f45f-88ms8": 0}}}, {"time": "22:08:55", "elapsed": 9, "backend": {"replicas": 1, "hpa_cpu": 1, "pods": {"heath-backend-57dc47cf-w9g6v": 2}}, "frontend": {"replicas": 1, "hpa_cpu": 0, "pods": {"heath-frontend-7fc695f45f-88ms8": 0}}}, {"time": "22:09:05", "elapsed": 19, "backend": {"replicas": 1, "hpa_cpu": 1, "pods": {"heath-backend-57dc47cf-w9g6v": 164}}, "frontend": {"replicas": 1, "hpa_cpu": 0, "pods": {"heath-frontend-7fc695f45f-88ms8": 0}}}, {"time": "22:09:15", "elapsed": 29, "backend": {"replicas": 2, "hpa_cpu": 127, "pods": {"heath-backend-57dc47cf-w9g6v": 164}}, "frontend": {"replicas": 1, "hpa_cpu": 0, "pods": {"heath-frontend-7fc695f45f-88ms8": 0}}}, {"time": "22:09:24", "elapsed": 38, "backend": {"replicas": 2, "hpa_cpu": 127, "pods": {"heath-backend-57dc47cf-w9g6v": 164}}, "frontend": {"replicas": 1, "hpa_cpu": 0, "pods": {"heath-frontend-7fc695f45f-88ms8": 0}}}, {"time": "22:09:33", "elapsed": 47, "backend": {"replicas": 2, "hpa_cpu": 127, "pods": {"heath-backend-57dc47cf-vn2fx": 997, "heath-backend-57dc47cf-w9g6v": 109}}, "frontend": {"replicas": 1, "hpa_cpu": 0, "pods": {"heath-frontend-7fc695f45f-88ms8": 2}}}, {"time": "22:09:43", "elapsed": 57, "backend": {"replicas": 3, "hpa_cpu": 210, "pods": {"heath-backend-57dc47cf-vn2fx": 997, "heath-backend-57dc47cf-w9g6v": 109}}, "frontend": {"replicas": 1, "hpa_cpu": 0, "pods": {"heath-frontend-7fc695f45f-88ms8": 2}}}, {"time": "22:09:52", "elapsed": 66, "backend": {"replicas": 3, "hpa_cpu": 210, "pods": {"heath-backend-57dc47cf-vn2fx": 997, "heath-backend-57dc47cf-w9g6v": 109}}, "frontend": {"replicas": 1, "hpa_cpu": 0, "pods": {"heath-frontend-7fc695f45f-88ms8": 2}}}, {"time": "22:10:02", "elapsed": 76, "backend": {"replicas": 3, "hpa_cpu": 68, "pods": {"heath-backend-57dc47cf-tk4pl": 996, "heath-backend-57dc47cf-vn2fx": 706, "heath-backend-57dc47cf-w9g6v": 51}}, "frontend": {"replicas": 1, "hpa_cpu": 0, "pods": {"heath-frontend-7fc695f45f-88ms8": 2}}}, {"time": "22:10:11", "elapsed": 85, "backend": {"replicas": 3, "hpa_cpu": 68, "pods": {"heath-backend-57dc47cf-tk4pl": 996, "heath-backend-57dc47cf-vn2fx": 706, "heath-backend-57dc47cf-w9g6v": 51}}, "frontend": {"replicas": 1, "hpa_cpu": 0, "pods": {"heath-frontend-7fc695f45f-88ms8": 2}}}, {"time": "22:10:21", "elapsed": 95, "backend": {"replicas": 3, "hpa_cpu": 68, "pods": {"heath-backend-57dc47cf-tk4pl": 996, "heath-backend-57dc47cf-vn2fx": 706, "heath-backend-57dc47cf-w9g6v": 51}}, "frontend": {"replicas": 1, "hpa_cpu": 0, "pods": {"heath-frontend-7fc695f45f-88ms8": 2}}}, {"time": "22:10:30", "elapsed": 104, "backend": {"replicas": 3, "hpa_cpu": 144, "pods": {"heath-backend-57dc47cf-tk4pl": 651, "heath-backend-57dc47cf-vn2fx": 82, "heath-backend-57dc47cf-w9g6v": 52}}, "frontend": {"replicas": 1, "hpa_cpu": 0, "pods": {"heath-frontend-7fc695f45f-88ms8": 2}}}, {"time": "22:10:40", "elapsed": 113, "backend": {"replicas": 3, "hpa_cpu": 38, "pods": {"heath-backend-57dc47cf-tk4pl": 651, "heath-backend-57dc47cf-vn2fx": 82, "heath-backend-57dc47cf-w9g6v": 52}}, "frontend": {"replicas": 1, "hpa_cpu": 0, "pods": {"heath-frontend-7fc695f45f-88ms8": 2}}}, {"time": "22:10:49", "elapsed": 123, "backend": {"replicas": 3, "hpa_cpu": 38, "pods": {"heath-backend-57dc47cf-tk4pl": 651, "heath-backend-57dc47cf-vn2fx": 82, "heath-backend-57dc47cf-w9g6v": 52}}, "frontend": {"replicas": 1, "hpa_cpu": 0, "pods": {"heath-frontend-7fc695f45f-88ms8": 2}}}, {"time": "22:10:58", "elapsed": 132, "backend": {"replicas": 3, "hpa_cpu": 38, "pods": {"heath-backend-57dc47cf-tk4pl": 651, "heath-backend-57dc47cf-vn2fx": 82, "heath-backend-57dc47cf-w9g6v": 52}}, "frontend": {"replicas": 1, "hpa_cpu": 0, "pods": {"heath-frontend-7fc695f45f-88ms8": 2}}}, {"time": "22:11:08", "elapsed": 142, "backend": {"replicas": 3, "hpa_cpu": 38, "pods": {"heath-backend-57dc47cf-tk4pl": 65, "heath-backend-57dc47cf-vn2fx": 90, "heath-backend-57dc47cf-w9g6v": 71}}, "frontend": {"replicas": 1, "hpa_cpu": 0, "pods": {"heath-frontend-7fc695f45f-88ms8": 2}}}, {"time": "22:11:17", "elapsed": 151, "backend": {"replicas": 3, "hpa_cpu": 20, "pods": {"heath-backend-57dc47cf-tk4pl": 65, "heath-backend-57dc47cf-vn2fx": 90, "heath-backend-57dc47cf-w9g6v": 71}}, "frontend": {"replicas": 1, "hpa_cpu": 0, "pods": {"heath-frontend-7fc695f45f-88ms8": 2}}}, {"time": "22:11:27", "elapsed": 161, "backend": {"replicas": 3, "hpa_cpu": 28, "pods": {"heath-backend-57dc47cf-tk4pl": 65, "heath-backend-57dc47cf-vn2fx": 90, "heath-backend-57dc47cf-w9g6v": 71}}, "frontend": {"replicas": 1, "hpa_cpu": 0, "pods": {"heath-frontend-7fc695f45f-88ms8": 2}}}, {"time": "22:11:36", "elapsed": 170, "backend": {"replicas": 3, "hpa_cpu": 28, "pods": {"heath-backend-57dc47cf-tk4pl": 93, "heath-backend-57dc47cf-vn2fx": 74, "heath-backend-57dc47cf-w9g6v": 29}}, "frontend": {"replicas": 1, "hpa_cpu": 0, "pods": {"heath-frontend-7fc695f45f-88ms8": 2}}}, {"time": "22:11:47", "elapsed": 180, "backend": {"replicas": 3, "hpa_cpu": 0, "pods": {"heath-backend-57dc47cf-tk4pl": 93, "heath-backend-57dc47cf-vn2fx": 74, "heath-backend-57dc47cf-w9g6v": 29}}, "frontend": {"replicas": 1, "hpa_cpu": 0, "pods": {"heath-frontend-7fc695f45f-88ms8": 2}}}];
            const labels = rawData.map(d => d.time);
            
            const beReplicas = rawData.map(d => d.backend.replicas);
            const beHpaCpu = rawData.map(d => d.backend.hpa_cpu);
            
            const feReplicas = rawData.map(d => d.frontend.replicas);
            const feHpaCpu = rawData.map(d => d.frontend.hpa_cpu);

            const commonOptions = {
                responsive: true,
                interaction: { mode: 'index', intersect: false },
            };

            const hpaScales = {
                y: {
                    type: 'linear', display: true, position: 'left',
                    title: { display: true, text: 'Pod Count' },
                    min: 0, suggestedMax: 5,
                    ticks: { stepSize: 1 }  // INTEGERS ONLY
                },
                y1: {
                    type: 'linear', display: true, position: 'right',
                    title: { display: true, text: 'HPA CPU Target (%)' },
                    grid: { drawOnChartArea: false },
                    min: 0
                }
            };

            // --- Backend Charts ---
            new Chart(document.getElementById('beHpaChart'), {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [
                        { label: 'Replicas', data: beReplicas, borderColor: '#36A2EB', backgroundColor: 'rgba(54, 162, 235, 0.1)', yAxisID: 'y', stepped: true, fill: true },
                        { label: 'Avg CPU %', data: beHpaCpu, borderColor: '#FF6384', yAxisID: 'y1', tension: 0.4 }
                    ]
                },
                options: { ...commonOptions, scales: hpaScales }
            });

            new Chart(document.getElementById('bePodsChart'), {
                type: 'line',
                data: { labels: labels, datasets: [{"label": "heath-backend-57dc47cf-tk4pl", "data": [0, 0, 0, 0, 0, 0, 0, 0, 996, 996, 996, 651, 651, 651, 651, 65, 65, 65, 93, 93], "borderColor": "#FF6384", "backgroundColor": "#FF6384", "fill": false, "tension": 0.1}, {"label": "heath-backend-57dc47cf-vn2fx", "data": [0, 0, 0, 0, 0, 997, 997, 997, 706, 706, 706, 82, 82, 82, 82, 90, 90, 90, 74, 74], "borderColor": "#36A2EB", "backgroundColor": "#36A2EB", "fill": false, "tension": 0.1}, {"label": "heath-backend-57dc47cf-w9g6v", "data": [2, 2, 164, 164, 164, 109, 109, 109, 51, 51, 51, 52, 52, 52, 52, 71, 71, 71, 29, 29], "borderColor": "#FFCE56", "backgroundColor": "#FFCE56", "fill": false, "tension": 0.1}] },
                options: { ...commonOptions, plugins: { legend: { position: 'bottom' } } }
            });

            // --- Frontend Charts ---
            new Chart(document.getElementById('feHpaChart'), {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [
                        { label: 'Replicas', data: feReplicas, borderColor: '#4BC0C0', backgroundColor: 'rgba(75, 192, 192, 0.1)', yAxisID: 'y', stepped: true, fill: true },
                        { label: 'Avg CPU %', data: feHpaCpu, borderColor: '#FF9F40', yAxisID: 'y1', tension: 0.4 }
                    ]
                },
                options: { ...commonOptions, scales: hpaScales }
            });

            new Chart(document.getElementById('fePodsChart'), {
                type: 'line',
                data: { labels: labels, datasets: [{"label": "heath-frontend-7fc695f45f-88ms8", "data": [0, 0, 0, 0, 0, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2], "borderColor": "#FF6384", "backgroundColor": "#FF6384", "fill": false, "tension": 0.1}] },
                options: { ...commonOptions, plugins: { legend: { position: 'bottom' } } }
            });
        </script>
    </body>
    </html>
    